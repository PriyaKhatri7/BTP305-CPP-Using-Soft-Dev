<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC
    '-//W3C//DTD XHTML 1.0 Transitional//EN'
    'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html lang="en-us" xmlns='http://www.w3.org/1999/xhtml'>
<head>
    <title>OO Software Development Using C++11 | ICT - Seneca</title>

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />

    <meta name="Copyright" content="(c) Copyright Seneca College 2014" />
    <meta name="Description" content="Welcome to the OOP345 Web Site.  On this site you can find an intermediate course on object-oriented programming in C++.  Designed by Chris Szalwinski." />
    <meta name="Abstract" content="This subject expands on introductory elements of C++ and covers intermediate C features.  The emphasis throughout is to prepare for the solution of large problems."/>
    <meta name="Author" content="chris.szalwinski@senecac.on.ca"/>
    <meta name="Keywords" content="software development, object-oriented programming, lecture notes"/>

    <link rel="stylesheet" type="text/css" href="../style.043.css">
    <link rel="stylesheet" type="text/css" href="../styleSPrint.043.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../stylePPrint.043.css" media="print">
</head>

<body>
 <table cellspacing="0" cellpadding="0" summary="banner"><!-- Body Cell -->
  <tr class="content"><!-- Content Area -->
   <td class="tbody">
    <table cellpadding="10" width="100%" summary="content">
     <tr>
      <td class="content" valign="top">
       <br />

       <div class="center">
        <span class="texth">Part C - Class Relationships</span>
        <br />
        <br />
        <span class="texthead">Templates</span>
        <br />
        <br />
        <span class="textagend">Workshop 3</span>
       </div>
       <br />
       <br />

       <p>In this workshop, you design and code a class template and test it on two
       unrelated classes.</p>
       <br />

       <p class="section">Learning Outcomes</p>

       <p>Upon successful completion of this workshop, you will have demonstrated
       the abilities to</p>

       <ul>
        <li>design and code a class template</li>
        <li>store key-value information in a pair of parallel arrays</li>
        <li>describe to your instructor what you have learned in completing this workshop</li>
       </ul>
       <br />

       <p class="section">Specifications</p>

       <p>
       The source files for this workshop include:
       </p>
       <ul>
       <li>A header file - <span class=code>KVList.h</span> - defines a class template for a list of key-value pairs</li>
       <li>A client file - <span class=code><a href="w3.cpp">w3.cpp</a></span> - the program that uses your class template</li>
       <li>An input file - <span class=code><a href="input.txt">input.txt</a></span> - contains the test data for
       your solution</li>
       </ul>

       <p class="ssection">KVList Template</p>

       <p>
       Design and code a class template named <span class=code>KVList</span> that manages
       lists of key-value pairs.&nbsp; The classes generated by your template
       contain two parallel arrays of dimension <span class=code>N</span> - a key array
       of type <span class=code>K</span> and a value array of type <span class=code>V</span>.&nbsp;
       <span class=code>K</span>, <span class=code>V</span> and <span class=code>N</span>
       are template parameters.&nbsp; The client application specifies the arguments for these
       parameters.&nbsp;
       </p>
       <p>
       Save your template definition in a header file named <span class=code>KVList.h</span>.&nbsp;
       </p>

       <p>
       Your template design includes the following member functions:</p>
       <ul>
        <li><span class="code">KVList()</span> - default constructor - creates an object in a safe empty state</li>
        <li><span class="code">size_t size() const</span> - a query that returns the number of entires in the key-value list</li>
        <li><span class="code">const K& key(int i) const</span> - a query that returns an unmodifiable reference to the key of element <span class=code>i</span> in the list; if <span class=code>i</span> is out of bounds, returns a reference to the key for the first element</li>
        <li><span class="code">const V& value(int i) const</span> - a query that returns an unmodifiable reference to the value of element <span class=code>i</span> in the list; if <span class=code>i</span> is out of bounds, returns a reference to the value for the first element</li>
        <li><span class="code">KVList& add(const K&, const V&)</span> - adds a new element to the list if room exists and returns a reference to the current object, does nothing if no room exists</li>
        <li><span class="code">int find(const K& k) const</span> - returns the index of the first element in the list with a key equal to <span class=code>k</span> - defaults to 0</li>
        <li><span class="code">KVList& replace(int i, const K& k, const V& v)</span> - replaces element <span class=code>i</span> in the list with the key and value received and returns a reference to the current object</li>
       </ul>

       <p class="ssection">Client Program</p>

       <p>
       The client program that uses your template definition accepts and displays data for
       </p>
       <ol>
       <li>an inventory of product-price pairs</li>
       <li>a glossary of acronym-definition pairs</li>
       </ol>
       <p>
       For each list, this client program sets the maximum number of entries to 5.&nbsp;
       </p>
       <p>
       This program can accept data either from the console or from an input file.&nbsp; The program is
       initialized to accept input data from the console.&nbsp; To receive data from a file, comment out
       the <span class=code>#define CONSOLE</span> macro.&nbsp; The name of the file is specified on the
       command line.&nbsp; (The source of the input data is determined by the presence or absence of the
       pre-processor macro <span class=code>CONSOLE</span>.&nbsp; If this macro has been defined, the
       client program accepts input from the console.&nbsp; If this macro has not been defined, the client
       program accepts input from the file named on the command line.)&nbsp;
       </p>

       <table width="45%" summary="">
        <tr>
         <td>
          <pre>
 // Workshop 3 - Templates
 // w3.cpp
 // Chris Szalwinski
 // 2018.05.17

 #include &lt;fstream&gt;
 #include &lt;iostream&gt;
 #include &lt;iomanip&gt;
 #include &lt;string&gt;
 #include "KVList.h"
 #define CONSOLE
 #ifndef CONSOLE
 #define SOURCE input
 #else
 #define SOURCE std::cin
 #endif

 // display list of key-value pairs
 //
 template &lt;typename K, typename V, int N&gt;
 void display(const std::string& msg, const KVList&lt;K, V, N&gt;& list, int w) {
     std::cout &lt;&lt; msg;
     for (size_t i = 0; i &lt; list.size(); i++)
         std::cout &lt;&lt; std::setw(w) &lt;&lt; list.key(i)
          &lt;&lt; " : " &lt;&lt; list.value(i) &lt;&lt; std::endl;
 }

 // prompt for user input
 //
 void prompt(const char* str) {
    #ifndef CONSOLE
    std::cout &lt;&lt; ". ";
    #else
    std::cout &lt;&lt; str;
    #endif
 }

 int main(int argc, char** argv) {
     std::cout &lt;&lt; "Command Line : ";
     for (int i = 0; i &lt; argc; i++) {
         std::cout &lt;&lt; argv[i] &lt;&lt; ' ';
     }
     std::cout &lt;&lt; std::endl;

     #ifndef CONSOLE
     if (argc == 1) {
         std::cerr &lt;&lt; "\n*** Insufficient number of arguments ***\n";
         std::cerr &lt;&lt; "Usage: " &lt;&lt; argv[0] &lt;&lt; " fileName \n";
         return 1;
     }
     else if (argc != 2) {
         std::cerr &lt;&lt; "\n*** Too many arguments ***\n";
         std::cerr &lt;&lt; "Usage: " &lt;&lt; argv[0] &lt;&lt; " fileName \n";
         return 2;
     }
     std::ifstream input(argv[1]);
     if (!input) {
         std::cerr &lt;&lt; "*** Failed to open file " &lt;&lt; argv[1] &lt;&lt; " successfully ***\n";
         return 3;
     }
     #endif

     bool keepreading;
     std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(2);

     std::cout &lt;&lt; "\nInventory\n=========\n";
     KVList &lt;std::string, double, 5&gt; inventory;
     std::string str;
     double price;

     keepreading = true;
     do {
         prompt("Product : ");
         getline(SOURCE, str);
         if (str.compare("quit") == 0) {
             keepreading = false;
         }
         else {
             prompt("Price : ");
             SOURCE &gt;&gt; price;
             SOURCE.ignore();
             inventory.add(str, price);
         }
     } while (keepreading);
     display("\nPrice List\n-----------\n", inventory, 13);

     std::cout &lt;&lt; "\nCorrections\n-----------\n";
     keepreading = true;
     do {
        prompt("Product : ");
         getline(SOURCE, str);
        if (str.compare("quit") == 0) {
             keepreading = false;
         }
         else {
             int i = inventory.find(str);
             if (i != -1) {
                 prompt("Price : ");
                 SOURCE &gt;&gt; price;
                 SOURCE.ignore();
                 inventory.replace(i, str, price);
             }
         }
     } while (keepreading);
     display("\nPrice List\n-----------\n", inventory, 13);

     std::cout &lt;&lt; "\nGlossary\n========\n";
     KVList &lt;std::string, std::string, 5&gt; glossary;
     std::string key, definition;

     keepreading = true;
     do {
         prompt("Key : ");
         getline(SOURCE, key);
         if (key.compare("quit") == 0) {
             keepreading = false;
         }
         else {
             prompt("Definition : ");
             getline(SOURCE, definition);
             glossary.add(key, definition);
         }
     } while (keepreading);
     display("\nEntries\n-------\n", glossary, 5);
 }</pre>
         </td>
        </tr>
       </table>

       <p>
       For the console input listed below, the client program using your template produces the following
       output.&nbsp; A copy of the file containing identical input is available <a href="input.txt">here</a>.
       </p>

       <table width="45%" summary="">
        <tr>
         <td>
          <pre class=result>
 Inventory
 =========
 Product : Pizza
 Price : 4.49
 Product : Pierogi
 Price : 2.56
 Product : Potato Chips&nbsp;
 Price : 2.29
 Product : Black Tea
 Price : 4.49
 Product : Green Tea
 Price : 3.46
 Product : Fruit Tea
 Price : 2.29
 Product : quit

 Price List
 ----------
         Pizza : 4.49
       Pierogi : 2.56
  Potato Chips : 2.29
     Black Tea : 4.49
     Green Tea : 3.46

 Corrections
 -----------
 Product : Black Tea
 Price : 5.29
 Product : quit

 Price List
 ----------
         Pizza : 4.49
       Pierogi : 2.56
  Potato Chips : 2.29
     Black Tea : 5.29
     Green Tea : 3.46</pre>
         </td>
         <td>
          <pre class=result>
 Glossary
 ========
 Key : CPU
 Definition : central processing unit&nbsp;
 Key : ALU
 Definition : arithmetic logic unit
 Key : quit

 Entries
 -------
  CPU : central processing unit
  ALU : arithmetic logic unit
























 </pre>
         </td>
        </tr>
       </table>
       <p>
       Note that the input data is only stored for the first N items,
       which is the size specified in the definitions of <span class=code>inventory</span>
       and <span class=code>glossary</span> (5).&nbsp; All additional input is discarded.
       </p>
       <br />

       <p id="sub" class="section">SUBMISSION</p>

       <p>Follow your professor's submission instructions.&nbsp;
       </p>
       <p>
       Unless otherwise stated by your instructor, your submission
       should include the following components:
       </p>
       <ol>
       <li>source code for your <span class=code>w3.cpp</span> file</li>
       <li>source code for your <span class=code>KVList.h</span> file</li>
       <li>a text file named <span class=code>reflect.txt</span> that
       includes:
       <ul>
       <li>the corrected answers to the latest quiz that you received</li>
       <li>a description of what you learned in completing this workshop</li>
       </ul>
       </ol>

       <br />
       <br />
       <br />
      </td>
     </tr>
    </table>
   </td>
  </tr>
 </table>
</body>
</html>